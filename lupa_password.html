<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <title>Lupa Password</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/public/css/lupa_password.css">
</head>

<body>

    <div class="container">

        <!-- Back -->
        <a href="login.html" class="back">
            <img src="/public/img/ikon/arrow.svg" alt="Kembali">
            <span>Kembali</span>
        </a>

        <!-- Title -->
        <h1 class="title">Lupa Password?</h1>
        <p class="subtitle">Masukkan Email anda untuk lupa password</p>

        <!-- Info / Error Box -->
        <div class="error-msg" id="messageBox">
            Kami akan mengirimkan surel yang berupa link tautan untuk mereset password anda
        </div>

        <!-- Label -->
        <label class="label">Email</label>
        <input
            type="email"
            id="email"
            class="input-field"
            placeholder="Isi Email Dengan Benar"
        >

        <!-- Button -->
        <button class="btn-main" id="sendBtn">Kirim</button>

    </div>

    <!-- JavaScript -->
<script type="module">
  import { supabase } from './js/supabase.js';

  document.getElementById("sendBtn").addEventListener("click", async () => {
    const email = document.getElementById("email").value.trim();
    const box = document.getElementById("messageBox");

    if (!email) {
      box.innerText = "Email wajib diisi";
      return;
    }

    const { error } = await supabase.auth.resetPasswordForEmail(email, {
      redirectTo: location.origin + '/login.html'
    });

    if (error) {
      box.innerText = error.message;
      return;
    }

    box.innerText = "Link reset password dikirim ke email.";
  });
</script>


</body>
</html>
